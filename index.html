<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1561.61">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #808080; -webkit-text-stroke: #808080}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #0000ff; -webkit-text-stroke: #0000ff}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #800000; -webkit-text-stroke: #800000}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #ff0000; -webkit-text-stroke: #ff0000}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #000000; -webkit-text-stroke: #000000}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #188038; -webkit-text-stroke: #188038}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #000000; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #0451a5; -webkit-text-stroke: #0451a5}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #5f6368; -webkit-text-stroke: #5f6368}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px Menlo; color: #098658; -webkit-text-stroke: #098658}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 16.0px; font: 14.0px 'Courier New'; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 21.0px; font: 14.0px 'PingFang TC'; color: #5f6368; -webkit-text-stroke: #5f6368}
    span.s1 {font-kerning: none; background-color: #f0f4f9}
    span.s2 {font-kerning: none; color: #ff0000; background-color: #f0f4f9; -webkit-text-stroke: 0px #ff0000}
    span.s3 {font-kerning: none; color: #383838; background-color: #f0f4f9; -webkit-text-stroke: 0px #383838}
    span.s4 {font-kerning: none; color: #800000; background-color: #f0f4f9; -webkit-text-stroke: 0px #800000}
    span.s5 {font-kerning: none; color: #000000; background-color: #f0f4f9; -webkit-text-stroke: 0px #000000}
    span.s6 {font-kerning: none; color: #0000ff; background-color: #f0f4f9; -webkit-text-stroke: 0px #0000ff}
    span.s7 {font: 14.0px 'PingFang TC'; font-kerning: none; background-color: #f0f4f9}
    span.s8 {font-kerning: none; color: #8430ce; background-color: #f0f4f9; -webkit-text-stroke: 0px #8430ce}
    span.s9 {font-kerning: none; color: #0451a5; background-color: #f0f4f9; -webkit-text-stroke: 0px #0451a5}
    span.s10 {font-kerning: none; color: #188038; background-color: #f0f4f9; -webkit-text-stroke: 0px #188038}
    span.s11 {font-kerning: none; color: #098658; background-color: #f0f4f9; -webkit-text-stroke: 0px #098658}
    span.s12 {font-kerning: none}
    span.s13 {font: 14.0px 'PingFang TC'; font-kerning: none; color: #000000; background-color: #f0f4f9; -webkit-text-stroke: 0px #000000}
    span.s14 {font: 14.0px 'Apple Color Emoji'; font-kerning: none; color: #000000; background-color: #f0f4f9; -webkit-text-stroke: 0px #000000}
    span.s15 {font-kerning: none; color: #008080; background-color: #f0f4f9; -webkit-text-stroke: 0px #008080}
    span.s16 {font-kerning: none; color: #5f6368; background-color: #f0f4f9; -webkit-text-stroke: 0px #5f6368}
    span.s17 {font: 14.0px 'PingFang TC'; font-kerning: none; color: #5f6368; background-color: #f0f4f9; -webkit-text-stroke: 0px #5f6368}
    span.s18 {font: 14.0px 'PingFang TC'; font-kerning: none; color: #188038; background-color: #f0f4f9; -webkit-text-stroke: 0px #188038}
    span.s19 {font-kerning: none; color: #b55908; background-color: #f0f4f9; -webkit-text-stroke: 0px #b55908}
    span.s20 {font: 14.0px Menlo; font-kerning: none; color: #000000; background-color: #f0f4f9; -webkit-text-stroke: 0px #000000}
    span.s21 {font: 14.0px Menlo; font-kerning: none; background-color: #f0f4f9}
    span.s22 {font: 14.0px 'Apple Color Emoji'; font-kerning: none; color: #188038; background-color: #f0f4f9; -webkit-text-stroke: 0px #188038}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">html</span><span class="s5"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s1">"zh-TW"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s6">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s5"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">title</span><span class="s3">&gt;</span><span class="s7">寶可夢抽抽樂</span><span class="s1"> Pro</span><span class="s3">&lt;/</span><span class="s4">title</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s8">@import</span><span class="s5"> </span><span class="s9">url</span><span class="s5">(</span><span class="s1">'https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&amp;display=swap'</span><span class="s5">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">body</span><span class="s1"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s10">'Noto Sans TC'</span><span class="s1">, </span><span class="s9">sans-serif</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s5"> </span><span class="s1">linear-gradient(</span><span class="s11">135deg</span><span class="s5">, </span><span class="s1">#f5f7fa</span><span class="s5"> </span><span class="s11">0%</span><span class="s5">, </span><span class="s1">#c3cfe2</span><span class="s5"> </span><span class="s11">100%</span><span class="s1">)</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">/* 5x6 </span><span class="s7">抽獎網格</span><span class="s1"> */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.game-grid</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s9">grid</span><span class="s1">;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">grid-template-columns:</span><span class="s5"> </span><span class="s9">repeat(</span><span class="s11">5</span><span class="s5">, </span><span class="s11">1fr</span><span class="s9">)</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">gap:</span><span class="s1"> </span><span class="s11">10px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s11">100%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">max-width:</span><span class="s1"> </span><span class="s11">480px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s9">auto</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.card</span><span class="s1"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s11">100%</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding-bottom:</span><span class="s1"> </span><span class="s11">100%</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">perspective:</span><span class="s1"> </span><span class="s11">1000px</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s9">pointer</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s9">relative</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.card-inner</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s9">absolute</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">top:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; </span><span class="s2">left:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; </span><span class="s2">width:</span><span class="s1"> </span><span class="s11">100%</span><span class="s1">; </span><span class="s2">height:</span><span class="s1"> </span><span class="s11">100%</span><span class="s1">;</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s5"> </span><span class="s1">transform</span><span class="s5"> </span><span class="s11">0.6s</span><span class="s5"> </span><span class="s1">cubic-bezier(</span><span class="s11">0.4</span><span class="s5">, </span><span class="s11">0</span><span class="s5">, </span><span class="s11">0.2</span><span class="s5">, </span><span class="s11">1</span><span class="s1">)</span><span class="s5">;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">transform-style:</span><span class="s5"> </span><span class="s9">preserve-3d</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.card.flipped</span><span class="s5"> </span><span class="s1">.card-inner</span><span class="s5"> { </span><span class="s2">transform:</span><span class="s5"> </span><span class="s9">rotateY(</span><span class="s11">180deg</span><span class="s9">)</span><span class="s5">; }</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.card-front</span><span class="s5">, </span><span class="s1">.card-back</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s9">absolute</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">top:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; </span><span class="s2">left:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; </span><span class="s2">width:</span><span class="s1"> </span><span class="s11">100%</span><span class="s1">; </span><span class="s2">height:</span><span class="s1"> </span><span class="s11">100%</span><span class="s1">;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">backface-visibility:</span><span class="s5"> </span><span class="s9">hidden</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s11">12px</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s5"> </span><span class="s1">0</span><span class="s5"> </span><span class="s1">4px</span><span class="s5"> </span><span class="s1">6px</span><span class="s5"> </span><span class="s1">-1px</span><span class="s5"> </span><span class="s9">rgba(</span><span class="s1">0</span><span class="s5">,</span><span class="s1">0</span><span class="s5">,</span><span class="s1">0</span><span class="s5">,</span><span class="s1">0.1</span><span class="s9">)</span><span class="s5">, </span><span class="s1">0</span><span class="s5"> </span><span class="s1">2px</span><span class="s5"> </span><span class="s1">4px</span><span class="s5"> </span><span class="s1">-1px</span><span class="s5"> </span><span class="s9">rgba(</span><span class="s1">0</span><span class="s5">,</span><span class="s1">0</span><span class="s5">,</span><span class="s1">0</span><span class="s5">,</span><span class="s1">0.06</span><span class="s9">)</span><span class="s5">;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">display:</span><span class="s5"> </span><span class="s9">flex</span><span class="s5">; </span><span class="s1">justify-content:</span><span class="s5"> </span><span class="s9">center</span><span class="s5">; </span><span class="s1">align-items:</span><span class="s5"> </span><span class="s9">center</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.card-front</span><span class="s5"> { </span><span class="s1">background-color:</span><span class="s5"> </span><span class="s9">#e2e8f0</span><span class="s5">; }</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">/* </span><span class="s7">純</span><span class="s1"> CSS </span><span class="s7">完美重現精靈球圖案</span><span class="s1"> */</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.pokeball-design</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s11">85%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s11">85%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s11">50%</span><span class="s1">;</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s5"> </span><span class="s1">linear-gradient(to</span><span class="s5"> </span><span class="s1">bottom</span><span class="s5">, </span><span class="s1">#ca2027</span><span class="s5"> </span><span class="s11">46%</span><span class="s5">, </span><span class="s1">#151a2a</span><span class="s5"> </span><span class="s11">46%</span><span class="s5">, </span><span class="s1">#151a2a</span><span class="s5"> </span><span class="s11">54%</span><span class="s5">, </span><span class="s1">#f1f1f1</span><span class="s5"> </span><span class="s11">54%</span><span class="s1">)</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s11">4px</span><span class="s1"> </span><span class="s9">solid</span><span class="s1"> </span><span class="s9">#151a2a</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s9">relative</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s9">inset</span><span class="s1"> </span><span class="s11">-4px</span><span class="s1"> </span><span class="s11">-4px</span><span class="s1"> </span><span class="s11">8px</span><span class="s1"> </span><span class="s9">rgba(</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0.15</span><span class="s9">)</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.pokeball-design::after</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">content:</span><span class="s1"> </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s9">absolute</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">top:</span><span class="s1"> </span><span class="s11">50%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">left:</span><span class="s1"> </span><span class="s11">50%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translate(</span><span class="s11">-50%</span><span class="s1">, </span><span class="s11">-50%</span><span class="s9">)</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s11">32%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s11">32%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s9">#f1f1f1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s11">4px</span><span class="s1"> </span><span class="s9">solid</span><span class="s1"> </span><span class="s9">#151a2a</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s11">50%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s9">inset</span><span class="s1"> </span><span class="s11">-2px</span><span class="s1"> </span><span class="s11">-2px</span><span class="s1"> </span><span class="s11">4px</span><span class="s1"> </span><span class="s9">rgba(</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0.1</span><span class="s9">)</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.card-back</span><span class="s1"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">background-color:</span><span class="s5"> </span><span class="s9">white</span><span class="s5">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">rotateY(</span><span class="s11">180deg</span><span class="s9">)</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s11">2px</span><span class="s1"> </span><span class="s9">solid</span><span class="s1"> </span><span class="s9">#cbd5e1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s11">4px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">@keyframes</span><span class="s1"> </span><span class="s9">imgShake</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">0%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">0</span><span class="s9">)</span><span class="s1">; </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">10%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">1.5</span><span class="s9">)</span><span class="s1">; </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">1</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">15%</span><span class="s1">, </span><span class="s11">25%</span><span class="s1">, </span><span class="s11">35%</span><span class="s1">, </span><span class="s11">45%</span><span class="s1">, </span><span class="s11">55%</span><span class="s1">, </span><span class="s11">65%</span><span class="s1">, </span><span class="s11">75%</span><span class="s1">, </span><span class="s11">85%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">1.5</span><span class="s9">)</span><span class="s1"> </span><span class="s9">rotate(</span><span class="s11">10deg</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">20%</span><span class="s1">, </span><span class="s11">30%</span><span class="s1">, </span><span class="s11">40%</span><span class="s1">, </span><span class="s11">50%</span><span class="s1">, </span><span class="s11">60%</span><span class="s1">, </span><span class="s11">70%</span><span class="s1">, </span><span class="s11">80%</span><span class="s1">, </span><span class="s11">90%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">1.5</span><span class="s9">)</span><span class="s1"> </span><span class="s9">rotate(</span><span class="s11">-10deg</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">95%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">1.5</span><span class="s9">)</span><span class="s1"> </span><span class="s9">rotate(</span><span class="s11">0deg</span><span class="s9">)</span><span class="s1">; </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">1</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">100%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">0</span><span class="s9">)</span><span class="s1">; </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">@keyframes</span><span class="s1"> </span><span class="s9">textFade</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">0%</span><span class="s1"> { </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translateY(</span><span class="s11">10px</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">10%</span><span class="s1">, </span><span class="s11">90%</span><span class="s1"> { </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">1</span><span class="s1">; </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translateY(</span><span class="s11">0</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">100%</span><span class="s1"> { </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translateY(</span><span class="s11">10px</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">#rewardPopup</span><span class="s5"> {</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">position:</span><span class="s5"> </span><span class="s9">fixed</span><span class="s5">; </span><span class="s1">top:</span><span class="s5"> </span><span class="s11">50%</span><span class="s5">; </span><span class="s1">left:</span><span class="s5"> </span><span class="s11">50%</span><span class="s5">; </span><span class="s1">transform:</span><span class="s5"> </span><span class="s9">translate(</span><span class="s11">-50%</span><span class="s5">, </span><span class="s11">-50%</span><span class="s9">)</span><span class="s5">;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">z-index:</span><span class="s5"> </span><span class="s11">100</span><span class="s5">; </span><span class="s1">pointer-events:</span><span class="s5"> </span><span class="s9">none</span><span class="s5">; </span><span class="s1">display:</span><span class="s5"> </span><span class="s9">none</span><span class="s5">;<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">flex-direction:</span><span class="s5"> </span><span class="s9">column</span><span class="s5">; </span><span class="s1">align-items:</span><span class="s5"> </span><span class="s9">center</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">#rewardPopup.active</span><span class="s5"> { </span><span class="s2">display:</span><span class="s5"> </span><span class="s9">flex</span><span class="s5">; }</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">#rewardPopup.active</span><span class="s5"> </span><span class="s1">#popupImg</span><span class="s5"> {</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">animation:</span><span class="s5"> </span><span class="s1">imgShake</span><span class="s5"> </span><span class="s1">var(--anim-duration</span><span class="s5">, </span><span class="s11">1.5s</span><span class="s1">)</span><span class="s5"> </span><span class="s1">cubic-bezier(</span><span class="s11">0.25</span><span class="s5">, </span><span class="s11">1</span><span class="s5">, </span><span class="s11">0.5</span><span class="s5">, </span><span class="s11">1</span><span class="s1">)</span><span class="s5"> </span><span class="s1">forwards</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">#rewardPopup.active</span><span class="s5"> </span><span class="s1">#popupText</span><span class="s5"> {</span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">animation:</span><span class="s5"> </span><span class="s1">textFade</span><span class="s5"> </span><span class="s1">var(--anim-duration</span><span class="s5">, </span><span class="s11">1.5s</span><span class="s1">)</span><span class="s5"> </span><span class="s1">ease-in-out</span><span class="s5"> </span><span class="s1">forwards</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.inventory-slot</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s11">45px</span><span class="s1">; </span><span class="s2">height:</span><span class="s1"> </span><span class="s11">45px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s9">rgba(</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0</span><span class="s1">,</span><span class="s11">0.05</span><span class="s9">)</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s11">2px</span><span class="s1"> </span><span class="s9">dashed</span><span class="s1"> </span><span class="s9">#cbd5e1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s11">50%</span><span class="s1">;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">display:</span><span class="s5"> </span><span class="s9">flex</span><span class="s5">; </span><span class="s1">justify-content:</span><span class="s5"> </span><span class="s9">center</span><span class="s5">; </span><span class="s1">align-items:</span><span class="s5"> </span><span class="s9">center</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s1"> </span><span class="s9">all</span><span class="s1"> </span><span class="s11">0.3s</span><span class="s1"> </span><span class="s9">ease</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s11">4px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.inventory-slot.filled</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s9">white</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s11">2px</span><span class="s1"> </span><span class="s9">solid</span><span class="s1"> </span><span class="s9">#ef4444</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">4px</span><span class="s1"> </span><span class="s11">6px</span><span class="s1"> </span><span class="s9">rgba(</span><span class="s11">239</span><span class="s1">, </span><span class="s11">68</span><span class="s1">, </span><span class="s11">68</span><span class="s1">, </span><span class="s11">0.2</span><span class="s9">)</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">1.1</span><span class="s9">)</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">#loadingOverlay</span><span class="s5"> {</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">position:</span><span class="s5"> </span><span class="s9">fixed</span><span class="s5">; </span><span class="s1">top:</span><span class="s5"> </span><span class="s11">0</span><span class="s5">; </span><span class="s1">left:</span><span class="s5"> </span><span class="s11">0</span><span class="s5">; </span><span class="s1">right:</span><span class="s5"> </span><span class="s11">0</span><span class="s5">; </span><span class="s1">bottom:</span><span class="s5"> </span><span class="s11">0</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s9">rgba(</span><span class="s11">255</span><span class="s1">,</span><span class="s11">255</span><span class="s1">,</span><span class="s11">255</span><span class="s1">,</span><span class="s11">0.8</span><span class="s9">)</span><span class="s1">;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">justify-content:</span><span class="s5"> </span><span class="s9">center</span><span class="s5">; </span><span class="s1">align-items:</span><span class="s5"> </span><span class="s9">center</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">z-index:</span><span class="s1"> </span><span class="s11">200</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">body</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"min-h-screen flex flex-col items-center py-6 px-4 relative"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- </span><span class="s7">自訂訊息提示框</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"customAlert"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed top-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-2xl z-50 transition-opacity duration-300 opacity-0 pointer-events-none font-bold text-lg text-center min-w-[300px]"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"customAlertText"</span><span class="s3">&gt;&lt;/</span><span class="s4">span</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- </span><span class="s7">刪除確認對話框</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"confirmModal"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed top-0 left-0 w-full h-full bg-black/60 z-[400] hidden justify-center items-center opacity-0 transition-opacity duration-300"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white p-6 rounded-2xl shadow-2xl text-center max-w-sm mx-4 transform scale-90 transition-transform duration-300"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"confirmModalBox"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold mb-6 text-gray-800"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"confirmModalText"</span><span class="s3">&gt;</span><span class="s13">確定要刪除嗎？</span><span class="s3">&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-center gap-4"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"confirmCancelBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-1 px-4 py-3 bg-gray-200 rounded-xl font-bold text-gray-700 hover:bg-gray-300 transition-colors"</span><span class="s3">&gt;</span><span class="s13">取消</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"confirmOkBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-1 px-4 py-3 bg-red-500 rounded-xl font-bold text-white hover:bg-red-600 transition-colors"</span><span class="s3">&gt;</span><span class="s13">確定刪除</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- </span><span class="s7">載入中遮罩</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"loadingOverlay"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden flex-col gap-4"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-600"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold text-gray-700"</span><span class="s3">&gt;</span><span class="s13">準備中</span><span class="s5">...</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- </span><span class="s7">展示品放大燈箱</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"lightbox"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed top-0 left-0 w-full h-full bg-black/80 z-[300] hidden justify-center items-center cursor-pointer opacity-0 transition-opacity duration-300"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex flex-col items-center"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">img</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"lightboxImg"</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">""</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"max-w-[80%] max-h-[60vh] object-contain transform scale-50 transition-transform duration-300 drop-shadow-2xl"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"lightboxText"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-white text-3xl font-black mt-4 tracking-widest opacity-0 transition-opacity duration-300 drop-shadow-md text-center px-4"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">a</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"lightboxLink"</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"#"</span><span class="s5"> </span><span class="s2">target</span><span class="s3">=</span><span class="s1">"_blank"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-4 px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-full shadow-lg opacity-0 transition-opacity duration-300 hidden"</span><span class="s3">&gt;</span><span class="s13">查看圖鑑資訊</span><span class="s3">&lt;/</span><span class="s4">a</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- </span><span class="s7">標題區</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">header</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mb-6"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">h1</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-4xl font-black text-gray-800 tracking-wider mb-2"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">span</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-red-600"</span><span class="s3">&gt;</span><span class="s7">寶可夢</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;</span><span class="s1"> </span><span class="s7">抽抽樂</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">h1</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-gray-500 font-medium"</span><span class="s3">&gt;</span><span class="s13">收集</span><span class="s5"> 10 </span><span class="s13">顆寶貝球達成目標！</span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">header</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Google </span><span class="s7">登入區塊</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"googleLoginSection"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full max-w-md bg-white p-8 rounded-2xl shadow-lg mb-6 text-center"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">h2</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold mb-6 text-gray-800"</span><span class="s3">&gt;</span><span class="s13">登入以跨裝置同步進度</span><span class="s3">&lt;/</span><span class="s4">h2</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"googleSignInBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full flex items-center justify-center gap-3 bg-white border-2 border-gray-200 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-50 font-bold text-lg transition-colors shadow-sm"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">svg</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-6 h-6"</span><span class="s5"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s5"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s3">&gt;&lt;</span><span class="s4">path</span><span class="s5"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"</span><span class="s5"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"#4285F4"</span><span class="s3">/&gt;&lt;</span><span class="s4">path</span><span class="s5"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"</span><span class="s5"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"#34A853"</span><span class="s3">/&gt;&lt;</span><span class="s4">path</span><span class="s5"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"</span><span class="s5"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"#FBBC05"</span><span class="s3">/&gt;&lt;</span><span class="s4">path</span><span class="s5"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"</span><span class="s5"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"#EA4335"</span><span class="s3">/&gt;&lt;/</span><span class="s4">svg</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">使用</span><span class="s1"> Google </span><span class="s7">帳號登入</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- </span><span class="s7">玩家選擇區塊</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"loginSection"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden w-full max-w-md bg-white p-6 rounded-2xl shadow-lg mb-6 text-center relative"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"logoutBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"absolute top-4 right-4 text-sm text-gray-500 hover:text-red-500 font-bold underline"</span><span class="s3">&gt;</span><span class="s13">登出</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">h2</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold mb-2 text-blue-600"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"userGreeting"</span><span class="s3">&gt;</span><span class="s13">準備開始</span><span class="s3">&lt;/</span><span class="s4">h2</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm text-gray-500 mb-4"</span><span class="s3">&gt;</span><span class="s13">所有紀錄都會安全地綁定在此帳號下</span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex gap-2 mb-4 w-full"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">select</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"userSelect"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-1 p-3 border-2 border-gray-300 rounded-xl text-lg focus:border-blue-500 focus:outline-none bg-gray-50 font-bold text-gray-700 cursor-pointer"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">option</span><span class="s1"> </span><span class="s2">value</span><span class="s3">=</span><span class="s6">""</span><span class="s3">&gt;</span><span class="s1">-- </span><span class="s7">載入紀錄中</span><span class="s1">... --</span><span class="s3">&lt;/</span><span class="s4">option</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">select</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"button"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"deletePlayerBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden bg-gray-300 text-gray-700 px-4 py-3 rounded-xl hover:bg-red-500 hover:text-white font-bold transition-colors shadow-sm whitespace-nowrap"</span><span class="s5"> </span><span class="s2">title</span><span class="s3">=</span><span class="s1">"</span><span class="s7">刪除選定玩家的紀錄</span><span class="s1">"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">刪除</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex gap-2 mb-4"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"text"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"userNameInput"</span><span class="s5"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"</span><span class="s7">輸入紀錄名稱</span><span class="s1">(</span><span class="s7">如</span><span class="s1">:</span><span class="s7">小明</span><span class="s1">)"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-1 p-3 border-2 border-gray-300 rounded-xl text-lg focus:border-blue-500 focus:outline-none"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"number"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"daysInput"</span><span class="s5"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"</span><span class="s7">天數</span><span class="s1">"</span><span class="s5"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"3"</span><span class="s5"> </span><span class="s2">min</span><span class="s3">=</span><span class="s1">"1"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-24 p-3 border-2 border-gray-300 rounded-xl text-lg focus:border-blue-500 focus:outline-none text-center"</span><span class="s5"> </span><span class="s2">title</span><span class="s3">=</span><span class="s1">"</span><span class="s7">設定挑戰天數</span><span class="s1">"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"button"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"loginBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full bg-red-500 text-white px-6 py-3 rounded-xl hover:bg-red-600 font-bold text-lg transition-colors shadow-md"</span><span class="s3">&gt;</span><span class="s13">進入遊戲</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- </span><span class="s7">遊戲區域</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gameArea"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden w-full flex-col items-center"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"timerSection"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full max-w-md bg-red-100 p-4 rounded-2xl shadow-lg mb-6 text-center border-2 border-red-300 relative"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">h2</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg font-bold text-red-700 mb-1"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s13">挑戰倒數</span><span class="s5"> </span><span class="s3">&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"playerNameDisplay"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm text-red-500 font-normal ml-2"</span><span class="s3">&gt;&lt;/</span><span class="s4">span</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">h2</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"timer"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-4xl font-black text-red-600 tracking-widest"</span><span class="s3">&gt;</span><span class="s5">00:00:00</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"button"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"switchPlayerBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"absolute top-3 right-3 bg-white text-red-600 border border-red-300 px-3 py-1 rounded-lg text-sm font-bold shadow-sm hover:bg-red-50 transition-colors"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">切換紀錄</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-2 gap-4 w-full max-w-md mb-6"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-blue-500 text-white p-3 rounded-2xl shadow-lg text-center"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-xs opacity-80"</span><span class="s3">&gt;</span><span class="s7">已收集寶可夢</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold"</span><span class="s3">&gt;&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"pokeCount"</span><span class="s3">&gt;</span><span class="s5">0</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;</span><span class="s5"> </span><span class="s3">&lt;</span><span class="s4">small</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm"</span><span class="s3">&gt;</span><span class="s5">/ 5</span><span class="s3">&lt;/</span><span class="s4">small</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-red-500 text-white p-3 rounded-2xl shadow-lg text-center"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-xs opacity-80"</span><span class="s3">&gt;</span><span class="s7">直接抽中寶貝球</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"ballCount"</span><span class="s3">&gt;</span><span class="s5">0</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"game-grid mb-8"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gameGrid"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full max-w-xl bg-white p-6 rounded-3xl shadow-xl border-t-4 border-red-500 mb-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center font-bold text-gray-700 mb-4"</span><span class="s3">&gt;</span><span class="s14">🏆</span><span class="s5"> </span><span class="s13">寶貝球收集進度</span><span class="s5"> (</span><span class="s3">&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"totalBalls"</span><span class="s3">&gt;</span><span class="s5">0</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;</span><span class="s5">/10)</span><span class="s3">&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex flex-wrap justify-center gap-3"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"inventoryContainer"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- </span><span class="s7">彈出特效組件</span><span class="s1"> --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"rewardPopup"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">img</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"popupImg"</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">""</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-48 h-48 object-contain drop-shadow-xl"</span><span class="s5"> </span><span class="s2">alt</span><span class="s3">=</span><span class="s1">"Pokemon"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"popupText"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-yellow-400 text-red-700 px-6 py-2 rounded-full font-black text-xl text-center shadow-xl border-4 border-white mt-[-20px] z-10 relative"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">收服了！</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"module"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s8">import</span><span class="s5"> { initializeApp } </span><span class="s8">from</span><span class="s5"> </span><span class="s1">"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"</span><span class="s5">;</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// </span><span class="s7">匯入</span><span class="s1"> collection </span><span class="s7">與</span><span class="s1"> getDocs </span><span class="s7">以支援讀取雲端清單</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">import</span><span class="s1"> { getFirestore, doc, getDoc, setDoc, deleteDoc, </span><span class="s15">Timestamp</span><span class="s1">, collection, getDocs } </span><span class="s8">from</span><span class="s1"> </span><span class="s10">"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">import</span><span class="s1"> { getAuth, signInWithPopup, </span><span class="s15">GoogleAuthProvider</span><span class="s1">, onAuthStateChanged, signOut, signInAnonymously } </span><span class="s8">from</span><span class="s1"> </span><span class="s10">"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"</span><span class="s1">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> db, auth, appId, provider;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> authReady = </span><span class="s8">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> userDocRef = </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> currentUser = </span><span class="s10">""</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> cloudPlayersList = []; </span><span class="s16">// </span><span class="s17">用來存儲雲端同步下來的玩家名單</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// 1. </span><span class="s7">請將這裡換成你在</span><span class="s1"> Firebase </span><span class="s7">取得的</span><span class="s1"> config</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">const</span><span class="s1"> firebaseConfig = {</span></p>
<p class="p11"><span class="s12"><span class="Apple-converted-space">  </span>apiKey: "AIzaSyA2Q53dRqxUTVIMm7yqTHHOrLT4ShBgsPY",</span></p>
<p class="p11"><span class="s12"><span class="Apple-converted-space">  </span>authDomain: "pokemongacha-9ffb2.firebaseapp.com",</span></p>
<p class="p11"><span class="s12"><span class="Apple-converted-space">  </span>projectId: "pokemongacha-9ffb2",</span></p>
<p class="p11"><span class="s12"><span class="Apple-converted-space">  </span>storageBucket: "pokemongacha-9ffb2.firebasestorage.app",</span></p>
<p class="p11"><span class="s12"><span class="Apple-converted-space">  </span>messagingSenderId: "64620615601",</span></p>
<p class="p11"><span class="s12"><span class="Apple-converted-space">  </span>appId: "1:64620615601:web:c32aa81b8943a0398d0f90",</span></p>
<p class="p11"><span class="s12"><span class="Apple-converted-space">  </span>measurementId: "G-HBXX9S8G93"</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span>appId = </span><span class="s1">'pokemon-gacha-app'</span><span class="s5">;<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// 2. </span><span class="s7">初始化</span><span class="s1"> Firebase</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> app = initializeApp(firebaseConfig);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>db = getFirestore(app);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>auth = getAuth(app);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>provider = </span><span class="s8">new</span><span class="s1"> </span><span class="s15">GoogleAuthProvider</span><span class="s1">();</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>onAuthStateChanged(auth, </span><span class="s8">async</span><span class="s1"> (user) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>authReady = </span><span class="s8">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (user &amp;&amp; !user.isAnonymous) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s10">'googleLoginSection'</span><span class="s1">).classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s10">'loginSection'</span><span class="s1">).classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s10">'userGreeting'</span><span class="s1">).innerText = </span><span class="s10">`</span><span class="s18">你好，</span><span class="s1">${user.displayName || </span><span class="s10">'</span><span class="s18">玩家</span><span class="s10">'</span><span class="s1">}</span><span class="s18">！</span><span class="s10">`</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s16">// </span><span class="s17">登入成功後，立刻從雲端同步選單</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>showLoading(</span><span class="s8">true</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">await</span><span class="s1"> refreshPlayerDropdown();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>showLoading(</span><span class="s8">false</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s10">'googleLoginSection'</span><span class="s1">).classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s10">'loginSection'</span><span class="s1">).classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s10">'gameArea'</span><span class="s1">).classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s10">'gameArea'</span><span class="s1">).classList.remove(</span><span class="s10">'flex'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>clearInterval(timerInterval);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>} </span><span class="s8">catch</span><span class="s1"> (e) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>console.error(</span><span class="s10">"Firebase </span><span class="s18">初始化錯誤</span><span class="s10">:"</span><span class="s1">, e);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// </span><span class="s7">遊戲狀態</span><span class="s1"> (</span><span class="s7">新增</span><span class="s1"> days </span><span class="s7">屬性以記錄天數</span><span class="s1">)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> state = { pokes: </span><span class="s19">0</span><span class="s1">, directBalls: </span><span class="s19">0</span><span class="s1">, totalBalls: </span><span class="s19">0</span><span class="s1">, isGameOver: </span><span class="s8">false</span><span class="s1">, deadline: </span><span class="s8">null</span><span class="s1">, cards: [], days: </span><span class="s19">3</span><span class="s1"> };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> timerInterval = </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> isOfflineMode = </span><span class="s8">false</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> playerToDelete = </span><span class="s10">""</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s8">const</span><span class="s5"> </span><span class="s15">BALL_IMG</span><span class="s5"> = </span><span class="s1">"https://upload.wikimedia.org/wikipedia/commons/5/53/Pok%C3%A9_Ball_icon.svg"</span><span class="s5">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s8">const</span><span class="s5"> </span><span class="s15">SOUND_ITEM</span><span class="s5"> = </span><span class="s8">new</span><span class="s5"> </span><span class="s15">Audio</span><span class="s5">(</span><span class="s1">'https://www.myinstants.com/media/sounds/pokemon-item-received.mp3'</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s8">const</span><span class="s5"> </span><span class="s15">SOUND_PIKA</span><span class="s5"> = </span><span class="s8">new</span><span class="s5"> </span><span class="s15">Audio</span><span class="s5">(</span><span class="s1">'https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/25.ogg'</span><span class="s5">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> playSound(audioObj) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>audioObj.currentTime = </span><span class="s19">0</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>audioObj.play().</span><span class="s8">catch</span><span class="s1">(e =&gt; console.warn(</span><span class="s10">"</span><span class="s18">音效可能因瀏覽器政策被阻擋</span><span class="s10">:"</span><span class="s1">, e));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// === </span><span class="s7">登入</span><span class="s1">/</span><span class="s7">登出事件</span><span class="s1"> ===</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'googleSignInBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, </span><span class="s8">async</span><span class="s1"> () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>showLoading(</span><span class="s8">true</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">await</span><span class="s1"> signInWithPopup(auth, provider);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">catch</span><span class="s1"> (error) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>console.error(</span><span class="s10">"</span><span class="s18">登入失敗</span><span class="s10">"</span><span class="s1">, error);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>showAlert(</span><span class="s10">"Google </span><span class="s18">登入失敗或已取消</span><span class="s10">"</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">finally</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>showLoading(</span><span class="s8">false</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'logoutBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, </span><span class="s8">async</span><span class="s1"> () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">await</span><span class="s1"> signOut(auth);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>showAlert(</span><span class="s10">"</span><span class="s18">已成功登出</span><span class="s10">"</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// === </span><span class="s7">本地與雲端紀錄選單同步管理</span><span class="s1"> ===</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> getSavedPlayers() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">try</span><span class="s1"> { </span><span class="s8">return</span><span class="s1"> </span><span class="s15">JSON</span><span class="s1">.parse(localStorage.getItem(</span><span class="s10">'pokemon_players'</span><span class="s1">)) || []; }<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">catch</span><span class="s1"> { </span><span class="s8">return</span><span class="s1"> []; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> savePlayerLocal(name, days) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">let</span><span class="s1"> players = getSavedPlayers();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">let</span><span class="s1"> existing = players.find(p =&gt; p.name === name);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (existing) { existing.days = days; }<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">else</span><span class="s1"> { players.push({name, days}); }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem(</span><span class="s10">'pokemon_players'</span><span class="s1">, </span><span class="s15">JSON</span><span class="s1">.stringify(players));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p12"><span class="s20"><span class="Apple-converted-space">        </span></span><span class="s21">// </span><span class="s1">向雲端索取玩家清單並渲染</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">async</span><span class="s1"> </span><span class="s8">function</span><span class="s1"> refreshPlayerDropdown() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (!isOfflineMode &amp;&amp; authReady &amp;&amp; auth.currentUser) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">const</span><span class="s1"> savesRef = collection(db, </span><span class="s10">'artifacts'</span><span class="s1">, appId, </span><span class="s10">'users'</span><span class="s1">, auth.currentUser.uid, </span><span class="s10">'pokemon_saves'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">const</span><span class="s1"> snapshot = </span><span class="s8">await</span><span class="s1"> getDocs(savesRef);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>cloudPlayersList = [];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>snapshot.forEach(docSnap =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>cloudPlayersList.push({ name: docSnap.id, days: docSnap.data().days || </span><span class="s19">3</span><span class="s1"> });</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>renderPlayerDropdown(cloudPlayersList);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">return</span><span class="s1">; </span><span class="s16">// </span><span class="s17">成功從雲端取得就跳出</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>} </span><span class="s8">catch</span><span class="s1"> (e) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>console.error(</span><span class="s10">"</span><span class="s18">無法取得雲端玩家清單</span><span class="s10">:"</span><span class="s1">, e);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p12"><span class="s20"><span class="Apple-converted-space">            </span></span><span class="s21">// </span><span class="s1">若離線或無法連線，回退到本地清單</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>renderPlayerDropdown(getSavedPlayers());</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> renderPlayerDropdown(playersArray) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> select = document.getElementById(</span><span class="s10">'userSelect'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> players = playersArray || getSavedPlayers();</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>select.innerHTML = </span><span class="s1">'&lt;option value=""&gt;-- </span><span class="s7">選擇曾遊玩的紀錄</span><span class="s1"> --&lt;/option&gt;'</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>players.forEach(p =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>select.innerHTML += </span><span class="s10">`&lt;option value="</span><span class="s1">${p.name}</span><span class="s10">"&gt;</span><span class="s1">${p.name}</span><span class="s10"> (</span><span class="s18">挑戰</span><span class="s10"> </span><span class="s1">${p.days}</span><span class="s10"> </span><span class="s18">天</span><span class="s10">)&lt;/option&gt;`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'userSelect'</span><span class="s1">).addEventListener(</span><span class="s10">'change'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> name = e.target.value;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> delBtn = document.getElementById(</span><span class="s10">'deletePlayerBtn'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (name) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>delBtn.classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s1">// </span><span class="s7">優先從雲端清單中尋找，找不到再找本地</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">let</span><span class="s1"> p = cloudPlayersList.find(x =&gt; x.name === name);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (!p) p = getSavedPlayers().find(x =&gt; x.name === name);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'userNameInput'</span><span class="s1">).value = p ? p.name : name;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'daysInput'</span><span class="s1">).value = p ? p.days : </span><span class="s10">'3'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>delBtn.classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'userNameInput'</span><span class="s1">).value = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'daysInput'</span><span class="s1">).value = </span><span class="s10">'3'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'deletePlayerBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>e.preventDefault();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> name = document.getElementById(</span><span class="s10">'userSelect'</span><span class="s1">).value;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (!name) </span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>playerToDelete = name;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'confirmModalText'</span><span class="s1">).innerText = </span><span class="s10">`</span><span class="s18">確定要刪除「</span><span class="s1">${name}</span><span class="s18">」的所有紀錄嗎？</span><span class="s10">`</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> modal = document.getElementById(</span><span class="s10">'confirmModal'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> box = document.getElementById(</span><span class="s10">'confirmModalBox'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modal.classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modal.classList.add(</span><span class="s10">'flex'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">void</span><span class="s1"> modal.offsetWidth;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modal.classList.remove(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>box.classList.remove(</span><span class="s10">'scale-90'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>box.classList.add(</span><span class="s10">'scale-100'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'confirmCancelBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>playerToDelete = </span><span class="s10">""</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> modal = document.getElementById(</span><span class="s10">'confirmModal'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> box = document.getElementById(</span><span class="s10">'confirmModalBox'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modal.classList.add(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>box.classList.remove(</span><span class="s10">'scale-100'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>box.classList.add(</span><span class="s10">'scale-90'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modal.classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modal.classList.remove(</span><span class="s10">'flex'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}, </span><span class="s19">300</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'confirmOkBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, </span><span class="s8">async</span><span class="s1"> () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> name = playerToDelete;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> modal = document.getElementById(</span><span class="s10">'confirmModal'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> box = document.getElementById(</span><span class="s10">'confirmModalBox'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modal.classList.add(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>box.classList.remove(</span><span class="s10">'scale-100'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>box.classList.add(</span><span class="s10">'scale-90'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modal.classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modal.classList.remove(</span><span class="s10">'flex'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}, </span><span class="s19">300</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (!name) </span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">let</span><span class="s1"> players = getSavedPlayers().filter(p =&gt; p.name !== name);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.setItem(</span><span class="s10">'pokemon_players'</span><span class="s1">, </span><span class="s15">JSON</span><span class="s1">.stringify(players));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.removeItem(</span><span class="s10">`pokemon_save_</span><span class="s1">${name}</span><span class="s10">`</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (db &amp;&amp; auth &amp;&amp; auth.currentUser) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">const</span><span class="s1"> userId = auth.currentUser.uid;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">const</span><span class="s1"> docRef = doc(db, </span><span class="s10">'artifacts'</span><span class="s1">, appId, </span><span class="s10">'users'</span><span class="s1">, userId, </span><span class="s10">'pokemon_saves'</span><span class="s1">, name);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">await</span><span class="s1"> deleteDoc(docRef);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">catch</span><span class="s1">(err) {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>console.warn(</span><span class="s10">"</span><span class="s18">刪除過程出現部分問題</span><span class="s10">"</span><span class="s1">, err);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>showAlert(</span><span class="s10">`</span><span class="s18">已刪除</span><span class="s10"> </span><span class="s1">${name}</span><span class="s10"> </span><span class="s18">的紀錄！</span><span class="s10">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">await</span><span class="s1"> refreshPlayerDropdown(); </span><span class="s16">// </span><span class="s17">刪除後重新同步選單</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'deletePlayerBtn'</span><span class="s1">).classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'userNameInput'</span><span class="s1">).value = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'daysInput'</span><span class="s1">).value = </span><span class="s10">'3'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>playerToDelete = </span><span class="s10">""</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// === UI </span><span class="s7">與特效工具</span><span class="s1"> ===</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> showAlert(msg) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> alertBox = document.getElementById(</span><span class="s10">'customAlert'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'customAlertText'</span><span class="s1">).innerText = msg;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>alertBox.classList.remove(</span><span class="s10">'opacity-0'</span><span class="s1">, </span><span class="s10">'pointer-events-none'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; alertBox.classList.add(</span><span class="s10">'opacity-0'</span><span class="s1">, </span><span class="s10">'pointer-events-none'</span><span class="s1">), </span><span class="s19">3000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> showLoading(show) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> overlay = document.getElementById(</span><span class="s10">'loadingOverlay'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (show) { overlay.classList.remove(</span><span class="s10">'hidden'</span><span class="s1">); overlay.classList.add(</span><span class="s10">'flex'</span><span class="s1">); }<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">else</span><span class="s1"> { overlay.classList.remove(</span><span class="s10">'flex'</span><span class="s1">); overlay.classList.add(</span><span class="s10">'hidden'</span><span class="s1">); }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> showLightbox(data) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> lb = document.getElementById(</span><span class="s10">'lightbox'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> lbImg = document.getElementById(</span><span class="s10">'lightboxImg'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> lbText = document.getElementById(</span><span class="s10">'lightboxText'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> lbLink = document.getElementById(</span><span class="s10">'lightboxLink'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbImg.src = data.img;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbText.innerText = </span><span class="s10">'</span><span class="s18">載入中</span><span class="s10">...'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbText.classList.remove(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbLink.classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbLink.classList.add(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (data.type === </span><span class="s10">'ball'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>lbText.innerText = </span><span class="s10">'</span><span class="s18">寶貝球</span><span class="s10"> (Poké Ball)'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> pokeId = data.img.split(</span><span class="s10">'/'</span><span class="s1">).pop().split(</span><span class="s10">'.'</span><span class="s1">)[</span><span class="s19">0</span><span class="s1">];</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>fetch(</span><span class="s1">`https://pokeapi.co/api/v2/pokemon-species/</span><span class="s5">${pokeId}</span><span class="s1">`</span><span class="s5">)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>.then(res =&gt; res.json())</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>.then(resData =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> twNameObj = resData.names.find(n =&gt; n.language.name === </span><span class="s10">'zh-Hant'</span><span class="s1">) || resData.names.find(n =&gt; n.language.name === </span><span class="s10">'zh-Hans'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> enNameObj = resData.names.find(n =&gt; n.language.name === </span><span class="s10">'en'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> twName = twNameObj ? twNameObj.name : </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> enName = enNameObj ? enNameObj.name : resData.name;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> capitalizedEnName = enName.charAt(</span><span class="s19">0</span><span class="s1">).toUpperCase() + enName.slice(</span><span class="s19">1</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>lbText.innerText = twName ? </span><span class="s10">`</span><span class="s1">${twName}</span><span class="s10"> (</span><span class="s1">${capitalizedEnName}</span><span class="s10">)`</span><span class="s1"> : capitalizedEnName;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>lbLink.href = twName ? </span><span class="s10">`https://wiki.52poke.com/wiki/</span><span class="s1">${twName}</span><span class="s10">`</span><span class="s1"> : </span><span class="s10">`https://wiki.52poke.com/wiki/</span><span class="s1">${capitalizedEnName}</span><span class="s10">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>lbLink.classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>setTimeout(() =&gt; lbLink.classList.remove(</span><span class="s10">'opacity-0'</span><span class="s1">), </span><span class="s19">100</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>})</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>.</span><span class="s8">catch</span><span class="s1">(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>lbText.innerText = </span><span class="s10">`</span><span class="s18">寶可夢</span><span class="s10"> #</span><span class="s1">${pokeId}</span><span class="s10">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lb.classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lb.classList.add(</span><span class="s10">'flex'</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">void</span><span class="s1"> lb.offsetWidth;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lb.classList.remove(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbImg.classList.remove(</span><span class="s10">'scale-50'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbImg.classList.add(</span><span class="s10">'scale-100'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'lightbox'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1">(e.target.id === </span><span class="s10">'lightboxLink'</span><span class="s1">) </span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> lb = document.getElementById(</span><span class="s10">'lightbox'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> lbImg = document.getElementById(</span><span class="s10">'lightboxImg'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> lbText = document.getElementById(</span><span class="s10">'lightboxText'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> lbLink = document.getElementById(</span><span class="s10">'lightboxLink'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lb.classList.add(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbImg.classList.remove(</span><span class="s10">'scale-100'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbImg.classList.add(</span><span class="s10">'scale-50'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbText.classList.add(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lbLink.classList.add(</span><span class="s10">'opacity-0'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>lb.classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>lb.classList.remove(</span><span class="s10">'flex'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}, </span><span class="s19">300</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> showDrawAnimation(imgSrc, text, useConfetti, isPikachuBonus = </span><span class="s8">false</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> popup = document.getElementById(</span><span class="s10">'rewardPopup'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'popupImg'</span><span class="s1">).src = imgSrc;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'popupText'</span><span class="s1">).innerText = text;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> duration = isPikachuBonus ? </span><span class="s19">3500</span><span class="s1"> : </span><span class="s19">1500</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>popup.style.setProperty(</span><span class="s10">'--anim-duration'</span><span class="s1">, </span><span class="s10">`</span><span class="s1">${duration}</span><span class="s10">ms`</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1">(useConfetti &amp;&amp; window.confetti) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>confetti({ particleCount: </span><span class="s19">150</span><span class="s1">, spread: </span><span class="s19">70</span><span class="s1">, origin: { y: </span><span class="s19">0.6</span><span class="s1"> }, colors: [</span><span class="s10">'#ff0000'</span><span class="s1">, </span><span class="s10">'#ffcc00'</span><span class="s1">, </span><span class="s10">'#ffffff'</span><span class="s1">] });</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>popup.classList.add(</span><span class="s10">'active'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; popup.classList.remove(</span><span class="s10">'active'</span><span class="s1">), duration);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> initInventory() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> container = document.getElementById(</span><span class="s10">'inventoryContainer'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>container.innerHTML = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">for</span><span class="s1"> (</span><span class="s8">let</span><span class="s1"> i = </span><span class="s19">0</span><span class="s1">; i &lt; </span><span class="s19">10</span><span class="s1">; i++) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> slot = document.createElement(</span><span class="s10">'div'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>slot.classList.add(</span><span class="s10">'inventory-slot'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>slot.id = </span><span class="s10">`slot-</span><span class="s1">${i}</span><span class="s10">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>container.appendChild(slot);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> getRandomPokeIds(count) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> ids = </span><span class="s8">new</span><span class="s1"> </span><span class="s15">Set</span><span class="s1">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">while</span><span class="s1">(ids.size &lt; count) ids.add(</span><span class="s15">Math</span><span class="s1">.floor(</span><span class="s15">Math</span><span class="s1">.random() * </span><span class="s19">386</span><span class="s1">) + </span><span class="s19">1</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">return</span><span class="s1"> </span><span class="s15">Array</span><span class="s1">.</span><span class="s8">from</span><span class="s1">(ids);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> initGame() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>initInventory();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> grid = document.getElementById(</span><span class="s10">'gameGrid'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>grid.innerHTML = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> pokeIds = getRandomPokeIds(</span><span class="s19">25</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">let</span><span class="s1"> cardsData = [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>...</span><span class="s15">Array</span><span class="s1">(</span><span class="s19">5</span><span class="s1">).fill({ type: </span><span class="s10">'ball'</span><span class="s1">, img: </span><span class="s15">BALL_IMG</span><span class="s1"> }),</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>...pokeIds.map(id =&gt; ({ type: </span><span class="s1">'pokemon'</span><span class="s5">, img: </span><span class="s1">`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/</span><span class="s5">${id}</span><span class="s1">.png`</span><span class="s5"> }))</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>cardsData.sort(() =&gt; </span><span class="s15">Math</span><span class="s1">.random() - </span><span class="s19">0.5</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>cardsData.forEach((data) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> card = document.createElement(</span><span class="s10">'div'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>card.className = </span><span class="s10">'card pointer-events-none'</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>card.innerHTML = </span><span class="s10">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="card-inner"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="card-front"&gt;&lt;div class="pokeball-design"&gt;&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="card-back"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;img src="</span><span class="s5">${data.img}</span><span class="s1">" class="w-full h-full object-contain" crossorigin="anonymous"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>card.onclick = () =&gt; handleFlip(card, data);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>grid.appendChild(card);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> startGame() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll(</span><span class="s10">'.card'</span><span class="s1">).forEach(card =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (!card.classList.contains(</span><span class="s10">'flipped'</span><span class="s1">)) card.classList.remove(</span><span class="s10">'pointer-events-none'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> handleFlip(el, data) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (el.classList.contains(</span><span class="s10">'flipped'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>showLightbox(data);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (state.isGameOver) </span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>el.classList.add(</span><span class="s10">'flipped'</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (data.type === </span><span class="s10">'ball'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>state.directBalls++;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>playSound(</span><span class="s15">SOUND_ITEM</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>showDrawAnimation(</span><span class="s15">BALL_IMG</span><span class="s1">, </span><span class="s10">"</span><span class="s18">直接獲得寶貝球！</span><span class="s10">"</span><span class="s1">, </span><span class="s8">true</span><span class="s1">, </span><span class="s8">false</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>updateUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>saveProgress(</span><span class="s8">true</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>state.pokes++;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>showDrawAnimation(data.img, </span><span class="s10">"</span><span class="s18">收服了！</span><span class="s10">"</span><span class="s1">, </span><span class="s8">false</span><span class="s1">, </span><span class="s8">false</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">if</span><span class="s1"> (state.pokes &gt; </span><span class="s19">0</span><span class="s1"> &amp;&amp; state.pokes % </span><span class="s19">5</span><span class="s1"> === </span><span class="s19">0</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>playSound(</span><span class="s15">SOUND_PIKA</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>setTimeout(() =&gt; playSound(</span><span class="s15">SOUND_ITEM</span><span class="s1">), </span><span class="s19">800</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span>showDrawAnimation(</span><span class="s1">"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/25.png"</span><span class="s5">, </span><span class="s1">"</span><span class="s7">集滿</span><span class="s1"> 5 </span><span class="s7">隻！兌換寶貝球！</span><span class="s1">"</span><span class="s5">, </span><span class="s8">true</span><span class="s5">, </span><span class="s8">true</span><span class="s5">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>updateUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>saveProgress(</span><span class="s8">true</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}, </span><span class="s19">1600</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> updateUI() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.totalBalls = state.directBalls + </span><span class="s15">Math</span><span class="s1">.floor(state.pokes / </span><span class="s19">5</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'pokeCount'</span><span class="s1">).innerText = state.pokes % </span><span class="s19">5</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'ballCount'</span><span class="s1">).innerText = state.directBalls;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'totalBalls'</span><span class="s1">).innerText = state.totalBalls;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">for</span><span class="s1"> (</span><span class="s8">let</span><span class="s1"> i = </span><span class="s19">0</span><span class="s1">; i &lt; </span><span class="s19">10</span><span class="s1">; i++) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> slot = document.getElementById(</span><span class="s10">`slot-</span><span class="s1">${i}</span><span class="s10">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (i &lt; state.totalBalls &amp;&amp; !slot.classList.contains(</span><span class="s10">'filled'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>slot.classList.add(</span><span class="s10">'filled'</span><span class="s1">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>slot.innerHTML = </span><span class="s1">`&lt;img src="</span><span class="s5">${</span><span class="s15">BALL_IMG</span><span class="s5">}</span><span class="s1">" class="w-full h-full object-contain animate-bounce drop-shadow-md"&gt;`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (state.totalBalls &gt;= </span><span class="s19">10</span><span class="s1"> &amp;&amp; !state.isGameOver) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>state.isGameOver = </span><span class="s8">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">if</span><span class="s1">(window.confetti) confetti({ particleCount: </span><span class="s19">500</span><span class="s1">, spread: </span><span class="s19">160</span><span class="s1"> });</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>showAlert(</span><span class="s10">"</span><span class="s22">🎉</span><span class="s10"> </span><span class="s18">恭喜達成目標！你已經成為寶可夢大師了！</span><span class="s10">"</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}, </span><span class="s19">1000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>saveProgress(</span><span class="s8">true</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">const</span><span class="s1"> fetchWithTimeout = </span><span class="s8">async</span><span class="s1"> (promise, ms) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">let</span><span class="s1"> timeoutId;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> timeoutPromise = </span><span class="s8">new</span><span class="s1"> </span><span class="s15">Promise</span><span class="s1">((_, reject) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>timeoutId = setTimeout(() =&gt; reject(</span><span class="s8">new</span><span class="s1"> </span><span class="s15">Error</span><span class="s1">(</span><span class="s10">'TIMEOUT'</span><span class="s1">)), ms);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">return</span><span class="s1"> </span><span class="s15">Promise</span><span class="s1">.race([promise, timeoutPromise]).</span><span class="s8">finally</span><span class="s1">(() =&gt; clearTimeout(timeoutId));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'loginBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, </span><span class="s8">async</span><span class="s1"> (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>e.preventDefault();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> name = document.getElementById(</span><span class="s10">'userNameInput'</span><span class="s1">).value.trim();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> days = parseInt(document.getElementById(</span><span class="s10">'daysInput'</span><span class="s1">).value) || </span><span class="s19">3</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (!name) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>showAlert(</span><span class="s10">'</span><span class="s18">請輸入紀錄名稱或選擇玩家！</span><span class="s10">'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>currentUser = name;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>savePlayerLocal(name, days);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>showLoading(</span><span class="s8">true</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (!authReady || !auth || !auth.currentUser) isOfflineMode = </span><span class="s8">true</span><span class="s1">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (!isOfflineMode) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> userId = auth.currentUser.uid;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>userDocRef = doc(db, </span><span class="s10">'artifacts'</span><span class="s1">, appId, </span><span class="s10">'users'</span><span class="s1">, userId, </span><span class="s10">'pokemon_saves'</span><span class="s1">, name);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> docSnap = </span><span class="s8">await</span><span class="s1"> fetchWithTimeout(getDoc(userDocRef), </span><span class="s19">2000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">if</span><span class="s1"> (docSnap.exists()) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s8">const</span><span class="s1"> data = docSnap.data();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s8">if</span><span class="s1"> (data.deadline &amp;&amp; data.deadline.toDate &amp;&amp; data.deadline.toDate() &lt; </span><span class="s8">new</span><span class="s1"> </span><span class="s15">Date</span><span class="s1">()) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>showAlert(</span><span class="s10">'</span><span class="s18">遊戲期限已過，已為你重新開始！</span><span class="s10">'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>startNewGame(days);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (data.grid &amp;&amp; data.deadline &amp;&amp; data.deadline.toDate) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>showAlert(</span><span class="s10">`</span><span class="s18">讀取成功！載入紀錄：</span><span class="s1">${name}</span><span class="s10">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>state = { ...state, ...data, deadline: data.deadline.toDate(), days: data.days || days };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>loadSavedGrid(data.grid);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>updateUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>startGame();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>startNewGame(days);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>showAlert(</span><span class="s10">`</span><span class="s18">建立新紀錄：</span><span class="s1">${name}</span><span class="s18">，開始挑戰！</span><span class="s10">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>startNewGame(days);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>} </span><span class="s8">catch</span><span class="s1"> (error) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>console.warn(</span><span class="s10">"</span><span class="s18">讀取失敗，進入單機模式</span><span class="s10">:"</span><span class="s1">, error);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>isOfflineMode = </span><span class="s8">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (isOfflineMode) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">const</span><span class="s1"> savedDataStr = localStorage.getItem(</span><span class="s10">`pokemon_save_</span><span class="s1">${currentUser}</span><span class="s10">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">if</span><span class="s1"> (savedDataStr) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> data = </span><span class="s15">JSON</span><span class="s1">.parse(savedDataStr);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> savedDeadline = </span><span class="s8">new</span><span class="s1"> </span><span class="s15">Date</span><span class="s1">(data.deadline);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">if</span><span class="s1"> (savedDeadline &lt; </span><span class="s8">new</span><span class="s1"> </span><span class="s15">Date</span><span class="s1">()) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>showAlert(</span><span class="s10">'</span><span class="s18">遊戲期限已過，已為你重新開始！</span><span class="s10">'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>startNewGame(days);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (data.grid) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>showAlert(</span><span class="s10">`</span><span class="s18">讀取成功！載入單機紀錄：</span><span class="s1">${name}</span><span class="s10">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>state = { ...state, ...data, deadline: savedDeadline, days: data.days || days };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>loadSavedGrid(data.grid);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>updateUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>startGame();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>startNewGame(days);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>showAlert(</span><span class="s10">'</span><span class="s18">已使用單機模式建立新紀錄！</span><span class="s10">'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>startNewGame(days);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'playerNameDisplay'</span><span class="s1">).innerText = </span><span class="s10">`(</span><span class="s18">紀錄</span><span class="s10">: </span><span class="s1">${name}${isOfflineMode ? </span><span class="s10">' - </span><span class="s18">單機</span><span class="s10">'</span><span class="s1"> : </span><span class="s10">''</span><span class="s1">}</span><span class="s10">)`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'loginSection'</span><span class="s1">).classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'gameArea'</span><span class="s1">).classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'gameArea'</span><span class="s1">).classList.add(</span><span class="s10">'flex'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>startTimer();</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">catch</span><span class="s1"> (err) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>console.error(</span><span class="s10">"</span><span class="s18">不可預期錯誤</span><span class="s10">:"</span><span class="s1">, err);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>isOfflineMode = </span><span class="s8">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>startNewGame(days);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'loginSection'</span><span class="s1">).classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'gameArea'</span><span class="s1">).classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(</span><span class="s10">'gameArea'</span><span class="s1">).classList.add(</span><span class="s10">'flex'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>startTimer();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">finally</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>showLoading(</span><span class="s8">false</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s10">'switchPlayerBtn'</span><span class="s1">).addEventListener(</span><span class="s10">'click'</span><span class="s1">, </span><span class="s8">async</span><span class="s1"> (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>e.preventDefault();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>clearInterval(timerInterval);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'gameArea'</span><span class="s1">).classList.add(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'gameArea'</span><span class="s1">).classList.remove(</span><span class="s10">'flex'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s10">'loginSection'</span><span class="s1">).classList.remove(</span><span class="s10">'hidden'</span><span class="s1">);</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">// </span><span class="s7">切換玩家時也確保選單是最新的</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">await</span><span class="s1"> refreshPlayerDropdown();<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> startNewGame(days) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.days = days;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.deadline = </span><span class="s8">new</span><span class="s1"> </span><span class="s15">Date</span><span class="s1">(</span><span class="s8">new</span><span class="s1"> </span><span class="s15">Date</span><span class="s1">().getTime() + days * </span><span class="s19">24</span><span class="s1"> * </span><span class="s19">60</span><span class="s1"> * </span><span class="s19">60</span><span class="s1"> * </span><span class="s19">1000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.pokes = </span><span class="s19">0</span><span class="s1">; state.directBalls = </span><span class="s19">0</span><span class="s1">; state.totalBalls = </span><span class="s19">0</span><span class="s1">; state.isGameOver = </span><span class="s8">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>initGame();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>startGame();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>saveProgress(</span><span class="s8">true</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> loadSavedGrid(gridData) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>initInventory();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> grid = document.getElementById(</span><span class="s10">'gameGrid'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>grid.innerHTML = </span><span class="s10">''</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>gridData.forEach((data) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> card = document.createElement(</span><span class="s10">'div'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>card.className = </span><span class="s10">`card </span><span class="s1">${data.flipped ? </span><span class="s10">'flipped'</span><span class="s1"> : </span><span class="s10">'pointer-events-none'</span><span class="s1">}</span><span class="s10">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>card.innerHTML = </span><span class="s10">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="card-inner"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="card-front"&gt;&lt;div class="pokeball-design"&gt;&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="card-back"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;img src="</span><span class="s5">${data.img}</span><span class="s1">" class="w-full h-full object-contain" crossorigin="anonymous"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>card.onclick = () =&gt; handleFlip(card, data);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>grid.appendChild(card);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> saveProgress(saveGrid = </span><span class="s8">true</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> dataToSave = {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>pokes: state.pokes, directBalls: state.directBalls, totalBalls: state.totalBalls,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>isGameOver: state.isGameOver, days: state.days || </span><span class="s19">3</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">let</span><span class="s1"> finalGrid = </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (saveGrid || state.isGameOver) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">const</span><span class="s1"> gridItems = [];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.querySelectorAll(</span><span class="s10">'.card'</span><span class="s1">).forEach(card =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> backImg = card.querySelector(</span><span class="s10">'.card-back img'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">if</span><span class="s1"> (backImg) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>gridItems.push({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>type: backImg.src.includes(</span><span class="s10">'item'</span><span class="s1">) || backImg.src.includes(</span><span class="s10">'SVG'</span><span class="s1">) || backImg.src.includes(</span><span class="s10">'svg'</span><span class="s1">) ? </span><span class="s10">'ball'</span><span class="s1"> : </span><span class="s10">'pokemon'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>img: backImg.src, flipped: card.classList.contains(</span><span class="s10">'flipped'</span><span class="s1">)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>finalGrid = gridItems;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>dataToSave.grid = finalGrid;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (isOfflineMode) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">if</span><span class="s1"> (!finalGrid) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">const</span><span class="s1"> oldData = </span><span class="s15">JSON</span><span class="s1">.parse(localStorage.getItem(</span><span class="s10">`pokemon_save_</span><span class="s1">${currentUser}</span><span class="s10">`</span><span class="s1">)) || {};</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>finalGrid = oldData.grid || [];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>dataToSave.grid = finalGrid;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">const</span><span class="s1"> localData = { ...dataToSave, deadline: state.deadline.getTime() };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>localStorage.setItem(</span><span class="s10">`pokemon_save_</span><span class="s1">${currentUser}</span><span class="s10">`</span><span class="s1">, </span><span class="s15">JSON</span><span class="s1">.stringify(localData));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>dataToSave.deadline = </span><span class="s15">Timestamp</span><span class="s1">.fromDate(state.deadline);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (userDocRef &amp;&amp; db) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>fetchWithTimeout(setDoc(userDocRef, dataToSave, { merge: </span><span class="s8">true</span><span class="s1"> }), </span><span class="s19">2000</span><span class="s1">).</span><span class="s8">catch</span><span class="s1">(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>isOfflineMode = </span><span class="s8">true</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">catch</span><span class="s1"> (err) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>console.warn(</span><span class="s10">"</span><span class="s18">存檔失敗</span><span class="s10">"</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> startTimer() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (timerInterval) clearInterval(timerInterval);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> timerEl = document.getElementById(</span><span class="s10">'timer'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>timerInterval = setInterval(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> distance = state.deadline.getTime() - </span><span class="s8">new</span><span class="s1"> </span><span class="s15">Date</span><span class="s1">().getTime();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">if</span><span class="s1"> (distance &lt; </span><span class="s19">0</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>clearInterval(timerInterval);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>timerEl.innerText = </span><span class="s10">"</span><span class="s18">已過期</span><span class="s10">"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">if</span><span class="s1"> (!state.isGameOver) { state.isGameOver = </span><span class="s8">true</span><span class="s1">; showAlert(</span><span class="s10">'</span><span class="s18">時間到！挑戰失敗。</span><span class="s10">'</span><span class="s1">); saveProgress(</span><span class="s8">true</span><span class="s1">); }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> days = </span><span class="s15">Math</span><span class="s1">.floor(distance / (</span><span class="s19">1000</span><span class="s1"> * </span><span class="s19">60</span><span class="s1"> * </span><span class="s19">60</span><span class="s1"> * </span><span class="s19">24</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> hours = </span><span class="s15">Math</span><span class="s1">.floor((distance % (</span><span class="s19">1000</span><span class="s1"> * </span><span class="s19">60</span><span class="s1"> * </span><span class="s19">60</span><span class="s1"> * </span><span class="s19">24</span><span class="s1">)) / (</span><span class="s19">1000</span><span class="s1"> * </span><span class="s19">60</span><span class="s1"> * </span><span class="s19">60</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> mins = </span><span class="s15">Math</span><span class="s1">.floor((distance % (</span><span class="s19">1000</span><span class="s1"> * </span><span class="s19">60</span><span class="s1"> * </span><span class="s19">60</span><span class="s1">)) / (</span><span class="s19">1000</span><span class="s1"> * </span><span class="s19">60</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> secs = </span><span class="s15">Math</span><span class="s1">.floor((distance % (</span><span class="s19">1000</span><span class="s1"> * </span><span class="s19">60</span><span class="s1">)) / </span><span class="s19">1000</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">let</span><span class="s1"> timeStr = </span><span class="s10">`</span><span class="s1">${hours.toString().padStart(</span><span class="s19">2</span><span class="s1">, </span><span class="s10">'0'</span><span class="s1">)}</span><span class="s10">:</span><span class="s1">${mins.toString().padStart(</span><span class="s19">2</span><span class="s1">, </span><span class="s10">'0'</span><span class="s1">)}</span><span class="s10">:</span><span class="s1">${secs.toString().padStart(</span><span class="s19">2</span><span class="s1">, </span><span class="s10">'0'</span><span class="s1">)}</span><span class="s10">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>timerEl.innerText = days &gt; </span><span class="s19">0</span><span class="s1"> ? </span><span class="s10">`</span><span class="s1">${days}</span><span class="s18">天</span><span class="s10"> `</span><span class="s1"> + timeStr : timeStr;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}, </span><span class="s19">1000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
